{"ast":null,"code":"import React,{useState}from\"react\";import\"./login.css\";import\"bootstrap/dist/css/bootstrap.min.css\";import{Formik,Form,Field,ErrorMessage}from\"formik\";import*as Yup from\"yup\";import MainButton from\"../../../Common Components/Main Button/MainButton\";import{Link,useNavigate}from\"react-router-dom\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import Modal from\"../../../Common Components/Modal/Modal\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const navigate=useNavigate();const[showModal,setShowModal]=useState(false);const handleSubmit=async values=>{try{const items={phone_number:values[\"phone_number\"],password:values[\"password\"],is_web:values[\"is_web\"]};const response=await fetch(\"https://gym-backend-production-65cc.up.railway.app/auth/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",accept:\"application/json\"},body:JSON.stringify(items)});const result=await response.json();console.log(result);localStorage.setItem(\"access\",result.data.access);localStorage.setItem(\"refresh\",result.data.refresh);localStorage.setItem(\"adminName\",result.data.role);if(response.ok){setShowModal(true);setTimeout(()=>{navigate(\"/Home\");},2500);}else{toast.error(\"Login failed. Please check your phone or password.\");}}catch(error){toast.error(\"Phone or password is not correct , please try again\");}};const initialValues={phone_number:\"\",password:\"\",is_web:true};const validationSchema=Yup.object({phone_number:Yup.string().required(\"هذا الحقل إلزامي\"),password:Yup.string().required(\"هذا الحقل إلزامي\")});return/*#__PURE__*/_jsxs(\"div\",{className:\"login d-flex\",children:[/*#__PURE__*/_jsx(\"aside\",{className:\"left-side d-flex justify-content-center align-items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/image/logo.png\",alt:\"Gym logo\",width:\"312px\",height:\"312px\"})})}),/*#__PURE__*/_jsx(\"aside\",{className:\"right-side\",children:/*#__PURE__*/_jsx(Formik,{initialValues:initialValues,validationSchema:validationSchema,onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Form,{className:\"login-form\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone_number\",className:\"d-block mb-2\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0639\\u0636\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsx(Field,{id:\"phone_number\",name:\"phone_number\"}),/*#__PURE__*/_jsx(ErrorMessage,{className:\"error-message mt-1 text-danger\",name:\"phone_number\",component:\"div\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"d-block mb-2 mt-4\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0633\\u0631\"}),/*#__PURE__*/_jsx(Field,{name:\"password\",id:\"password\",type:\"password\"}),/*#__PURE__*/_jsx(ErrorMessage,{className:\"error-message mt-1 text-danger\",name:\"password\",component:\"div\"})]}),/*#__PURE__*/_jsx(Link,{to:\"ForgotPassword\",className:\"text-decoration-none fw-bolder\",children:/*#__PURE__*/_jsx(\"span\",{className:\"forgot-password\",children:\"\\u0647\\u0644 \\u0646\\u0633\\u064A\\u062A \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0633\\u0631\\u061F\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center login-btn\",children:/*#__PURE__*/_jsx(MainButton,{text:\"تسجيل الدخول\",btnType:\"submit\"})})]})})}),/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(Modal,{isOpen:showModal,children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column align-items-center justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/image/pepicons-pencil_checkmark-outlined.png\",alt:\"\",width:\"100px\",height:\"100px\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center fw-lighter fs-5\",children:/*#__PURE__*/_jsx(\"p\",{className:\"p-3 text-dark\",children:\"\\u0644\\u0642\\u062F \\u062A\\u0645 \\u062A\\u0633\\u062C\\u064A\\u0644 \\u062F\\u062E\\u0648\\u0644\\u0643 \\u0628\\u0646\\u062C\\u0627\\u062D\"})})]})]});}export default Login;","map":{"version":3,"names":["React","useState","Formik","Form","Field","ErrorMessage","Yup","MainButton","Link","useNavigate","ToastContainer","toast","Modal","jsx","_jsx","jsxs","_jsxs","Login","navigate","showModal","setShowModal","handleSubmit","values","items","phone_number","password","is_web","response","fetch","method","headers","accept","body","JSON","stringify","result","json","console","log","localStorage","setItem","data","access","refresh","role","ok","setTimeout","error","initialValues","validationSchema","object","string","required","className","children","src","alt","width","height","onSubmit","htmlFor","id","name","component","type","to","text","btnType","isOpen"],"sources":["C:/Users/T.B/Coding/Gym-FrontEnd/src/Pages/Auth/Login/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./login.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MainButton from \"../../../Common Components/Main Button/MainButton\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Modal from \"../../../Common Components/Modal/Modal\";\r\n\r\nfunction Login() {\r\n  const navigate = useNavigate();\r\n  const [showModal, setShowModal] = useState(false);\r\n  const handleSubmit = async (values) => {\r\n    try {\r\n      const items = {\r\n        phone_number: values[\"phone_number\"],\r\n        password: values[\"password\"],\r\n        is_web: values[\"is_web\"],\r\n      };\r\n      const response = await fetch(\r\n        \"https://gym-backend-production-65cc.up.railway.app/auth/login\",\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            accept: \"application/json\",\r\n          },\r\n          body: JSON.stringify(items),\r\n        }\r\n      );\r\n\r\n      const result = await response.json();\r\n      console.log(result);\r\n      localStorage.setItem(\"access\", result.data.access);\r\n      localStorage.setItem(\"refresh\", result.data.refresh);\r\n      localStorage.setItem(\"adminName\", result.data.role);\r\n\r\n      if (response.ok) {\r\n        setShowModal(true);\r\n        setTimeout(() => {\r\n          navigate(\"/Home\");\r\n        }, 2500);\r\n      } else {\r\n        toast.error(\"Login failed. Please check your phone or password.\");\r\n      }\r\n    } catch (error) {\r\n      toast.error(\"Phone or password is not correct , please try again\");\r\n    }\r\n  };\r\n\r\n  const initialValues = {\r\n    phone_number: \"\",\r\n    password: \"\",\r\n    is_web: true,\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    phone_number: Yup.string().required(\"هذا الحقل إلزامي\"),\r\n    password: Yup.string().required(\"هذا الحقل إلزامي\"),\r\n  });\r\n\r\n  return (\r\n    <div className=\"login d-flex\">\r\n      <aside className=\"left-side d-flex justify-content-center align-items-center\">\r\n        <div className=\"logo\">\r\n          <img\r\n            src=\"/assets/image/logo.png\"\r\n            alt=\"Gym logo\"\r\n            width={\"312px\"}\r\n            height={\"312px\"}\r\n          />\r\n        </div>\r\n      </aside>\r\n      <aside className=\"right-side\">\r\n        <Formik\r\n          initialValues={initialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}\r\n        >\r\n          <Form className=\"login-form\">\r\n            <div>\r\n              <label htmlFor=\"phone_number\" className=\"d-block mb-2\">\r\n                رقم العضوية\r\n              </label>\r\n              <Field id=\"phone_number\" name=\"phone_number\" />\r\n              <ErrorMessage\r\n                className=\"error-message mt-1 text-danger\"\r\n                name=\"phone_number\"\r\n                component=\"div\"\r\n              />\r\n            </div>\r\n            <div className=\"mb-2\">\r\n              <label htmlFor=\"password\" className=\"d-block mb-2 mt-4\">\r\n                كلمة السر\r\n              </label>\r\n              <Field name=\"password\" id=\"password\" type=\"password\" />\r\n              <ErrorMessage\r\n                className=\"error-message mt-1 text-danger\"\r\n                name=\"password\"\r\n                component=\"div\"\r\n              />\r\n            </div>\r\n            <Link\r\n              to={\"ForgotPassword\"}\r\n              className=\"text-decoration-none fw-bolder\"\r\n            >\r\n              <span className=\"forgot-password\">هل نسيت كلمة السر؟</span>\r\n            </Link>\r\n            <div className=\"mt-4 text-center login-btn\">\r\n              <MainButton text={\"تسجيل الدخول\"} btnType=\"submit\" />\r\n            </div>\r\n          </Form>\r\n        </Formik>\r\n      </aside>\r\n      <ToastContainer />\r\n\r\n      <Modal isOpen={showModal}>\r\n        <div className=\"d-flex flex-column align-items-center justify-content-center\">\r\n          <div className=\"mt-3\">\r\n            <img src=\"/assets/image/pepicons-pencil_checkmark-outlined.png\" alt=\"\" width={\"100px\"} height={\"100px\"} />\r\n          </div>\r\n        </div>\r\n        <div className=\"text-center fw-lighter fs-5\">\r\n          <p className=\"p-3 text-dark\">لقد تم تسجيل دخولك بنجاح</p>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}