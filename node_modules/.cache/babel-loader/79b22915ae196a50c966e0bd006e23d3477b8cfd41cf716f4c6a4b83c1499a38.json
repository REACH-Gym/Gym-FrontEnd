{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"./AlmostFinished.css\";import ComponentTitle from\"../../../Common Components/ComponentTitle/ComponentTitle\";import Filter from\"../../../Common Components/Filter/Filter\";import ComponentBtns from\"../../../Common Components/ComponentBtns/ComponentBtns\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AlmostFinished(){const navigate=useNavigate();const access_token=localStorage.getItem(\"access\");const[almostFinishSub,setAlmostFinishSub]=useState([]);useEffect(()=>{async function fetchAlmostFinishSub(){try{const response=await fetch(\"https://gym-backend-production-65cc.up.railway.app/members/memberships/?filterexclude[]=user&=admin&filter%7Bstatus%7D=\",{method:\"GET\",headers:{accept:\"application/json\",Authorization:access_token}});const result=await response.json();console.log(result);setAlmostFinishSub(result.data.user_memberships);console.log(result.data.user_memberships);}catch(error){console.error(error);}}fetchAlmostFinishSub();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"allSubscriptionContainer mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-between ps-3 pe-3\",children:[/*#__PURE__*/_jsx(ComponentTitle,{MainIcon:\"/assets/image/subscriptions.png\",title:\"اشتراكات اوشكت على الانتهاء\",subTitle:\"يمكنك تجديد الاشتراكات  من هنا\"}),/*#__PURE__*/_jsx(Filter,{option1:\"جميع الأشتراكات\",option2:\"الأشتراكات الفعالة\",option3:\"أوشكت علي الأنتهاء\",option4:\"الأشتراكات المنتهية\",onClickOption1:()=>navigate('/Home/AllSubScriptions'),onClickOption2:()=>navigate('/Home/ActiveSubScription'),onClickOption3:()=>navigate('/Home/AlmostFinished'),onClickOption4:()=>navigate('/Home/ExpiredSubscriptions')}),/*#__PURE__*/_jsx(ComponentBtns,{btn1:\"+ إضافة اشتراك جديد \",onclick:()=>navigate('/Home/AddNewSubscription')})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table mt-3\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0636\\u0648\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\" \\u0631\\u0642\\u0645 \\u0627\\u0644\\u062C\\u0648\\u0627\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0645\\u0646 \\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0625\\u0644\\u0649 \\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0627\\u0644\\u0645\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:almostFinishSub.length>0?almostFinishSub.map((almost_expired,index)=>/*#__PURE__*/_jsxs(\"tr\",{style:{fontSize:\"14px\"},children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:almost_expired.user.name}),/*#__PURE__*/_jsx(\"td\",{children:almost_expired.user.phone_number}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:almost_expired.membership.duration}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"rounded text-center p-2\",style:{color:\"#EDC70A\",fontWeight:\"bolder\",backgroundColor:\"rgba(237, 199, 10,0.2)\"},children:almost_expired.status})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"rounded text-center p-2\",style:{color:\"#8280FF\",fontWeight:\"bolder\",backgroundColor:\"rgb(130, 128, 255,0.2)\"}})})]},index)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"9\",className:\"text-center\",children:\"No data available\"})})})]})]});}export default AlmostFinished;","map":{"version":3,"names":["React","useEffect","useState","ComponentTitle","Filter","ComponentBtns","useNavigate","jsx","_jsx","jsxs","_jsxs","AlmostFinished","navigate","access_token","localStorage","getItem","almostFinishSub","setAlmostFinishSub","fetchAlmostFinishSub","response","fetch","method","headers","accept","Authorization","result","json","console","log","data","user_memberships","error","className","children","MainIcon","title","subTitle","option1","option2","option3","option4","onClickOption1","onClickOption2","onClickOption3","onClickOption4","btn1","onclick","scope","length","map","almost_expired","index","style","fontSize","user","name","phone_number","membership","duration","color","fontWeight","backgroundColor","status","colSpan"],"sources":["C:/Users/T.B/Coding/Gym-FrontEnd/src/Component/Subscriptions/AlmostFinished/AlmostFinished.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./AlmostFinished.css\";\r\nimport ComponentTitle from \"../../../Common Components/ComponentTitle/ComponentTitle\";\r\nimport Filter from \"../../../Common Components/Filter/Filter\";\r\nimport ComponentBtns from \"../../../Common Components/ComponentBtns/ComponentBtns\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nfunction AlmostFinished() {\r\n  const navigate = useNavigate();\r\n  const access_token = localStorage.getItem(\"access\");\r\n  const [almostFinishSub, setAlmostFinishSub] = useState([]);\r\n  useEffect(() => {\r\n    async function fetchAlmostFinishSub() {\r\n      try {\r\n        const response = await fetch(\r\n          \"https://gym-backend-production-65cc.up.railway.app/members/memberships/?filterexclude[]=user&=admin&filter%7Bstatus%7D=\",\r\n          {\r\n            method: \"GET\",\r\n            headers: {\r\n              accept: \"application/json\",\r\n              Authorization: access_token,\r\n            },\r\n          }\r\n        );\r\n        const result = await response.json();\r\n        console.log(result);\r\n        setAlmostFinishSub(result.data.user_memberships);\r\n        console.log(result.data.user_memberships);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n    fetchAlmostFinishSub();\r\n  }, []);\r\n  return (\r\n    <div className=\"allSubscriptionContainer mt-4\">\r\n      <div className=\"d-flex align-items-center justify-content-between ps-3 pe-3\">\r\n        <ComponentTitle\r\n          MainIcon={\"/assets/image/subscriptions.png\"}\r\n          title={\"اشتراكات اوشكت على الانتهاء\"}\r\n          subTitle={\"يمكنك تجديد الاشتراكات  من هنا\"}\r\n        />\r\n        <Filter\r\n          option1={\"جميع الأشتراكات\"}\r\n          option2={\"الأشتراكات الفعالة\"}\r\n          option3={\"أوشكت علي الأنتهاء\"}\r\n          option4={\"الأشتراكات المنتهية\"}\r\n          onClickOption1={()=>navigate('/Home/AllSubScriptions')}\r\n          onClickOption2={()=>navigate('/Home/ActiveSubScription')}\r\n          onClickOption3={()=>navigate('/Home/AlmostFinished')}\r\n          onClickOption4={()=>navigate('/Home/ExpiredSubscriptions')}\r\n        />\r\n        <ComponentBtns btn1={\"+ إضافة اشتراك جديد \"} onclick={()=>navigate('/Home/AddNewSubscription')}/>\r\n      </div>\r\n      <table className=\"table mt-3\">\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\">#</th>\r\n            <th scope=\"col\">اسم العضو</th>\r\n            <th scope=\"col\"> رقم الجوال</th>\r\n            <th scope=\"col\">البيان</th>\r\n            <th scope=\"col\">من تاريخ</th>\r\n            <th scope=\"col\">إلى تاريخ</th>\r\n            <th scope=\"col\">المدة</th>\r\n            <th scope=\"col\">الحالة</th>\r\n            <th scope=\"col\">تفاصيل</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {almostFinishSub.length > 0 ? (\r\n            almostFinishSub.map((almost_expired, index) => (\r\n              <tr style={{ fontSize: \"14px\" }} key={index}>\r\n                <td>{index + 1}</td>\r\n                <td>{almost_expired.user.name}</td>\r\n                <td>{almost_expired.user.phone_number}</td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td>{almost_expired.membership.duration}</td>\r\n                <td>\r\n                  <p\r\n                    className=\"rounded text-center p-2\"\r\n                    style={{\r\n                      color: \"#EDC70A\",\r\n                      fontWeight: \"bolder\",\r\n                      backgroundColor: \"rgba(237, 199, 10,0.2)\",\r\n                    }}\r\n                  >\r\n                    {almost_expired.status}\r\n                  </p>\r\n                </td>\r\n                <td>\r\n                  <p\r\n                    className=\"rounded text-center p-2\"\r\n                    style={{\r\n                      color: \"#8280FF\",\r\n                      fontWeight: \"bolder\",\r\n                      backgroundColor: \"rgb(130, 128, 255,0.2)\",\r\n                    }}\r\n                  ></p>\r\n                </td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan=\"9\" className=\"text-center\">\r\n                No data available\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AlmostFinished;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}