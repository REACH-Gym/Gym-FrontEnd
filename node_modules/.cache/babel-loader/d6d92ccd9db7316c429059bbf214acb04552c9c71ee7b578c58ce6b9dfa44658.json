{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import{Formik,Form}from\"formik\";import*as Yup from\"yup\";import MainButton from\"../../../Common Components/Main Button/MainButton\";import ComponentTitle from\"../../../Common Components/ComponentTitle/ComponentTitle\";import\"./EditSub.css\";import InputField from\"../../../Common Components/InputField/InputField\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EditSub(){var _location$state;const location=useLocation();const navigate=useNavigate();const membership=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.membership;const[initialValues,setInitialValues]=useState({name:\"\",price:\"\",membership_duration:\"\",freeze_duration:\"\",description:\"\"});useEffect(()=>{if(membership){setInitialValues({name:membership.name||\"\",price:membership.price||\"\",membership_duration:membership.membership_duration||\"\",freeze_duration:membership.freeze_duration||\"\",description:membership.description||\"\"});}},[membership]);const validationSchema=Yup.object({name:Yup.string().required(\"هذا الحقل الزامي\"),price:Yup.string().required(\"هذا الحقل الزامي\"),membership_duration:Yup.string().required(\"هذا الحقل الزامي\"),freeze_duration:Yup.string().required(\"هذا الحقل الزامي\"),description:Yup.string().required(\"هذا الحقل الزامي\")});const handleSubmit=async(values,_ref)=>{let{setSubmitting}=_ref;try{const response=await fetch(`https://gym-backend-production-65cc.up.railway.app/memberships/${membership.id}/`,{method:\"PATCH\",headers:{accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:localStorage.getItem(\"access\")},body:JSON.stringify(values)});if(response.ok){const updateSub=await response.json();navigate(\"/Home/AllSubscriptions\",{state:{updateSub}});}else{console.error(\"Failed to update subscription\");}}catch(error){console.error(\"Error updating subscription:\",error);}finally{setSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"editMemberContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center justify-content-between ps-3 pe-3\",children:/*#__PURE__*/_jsx(ComponentTitle,{MainIcon:\"/assets/image/Vector.png\",title:\" تعديل أشتراك \",subTitle:\"يمكنك تعديل أشتراك من هنا\"})}),/*#__PURE__*/_jsx(Formik,{initialValues:initialValues,enableReinitialize:true,validationSchema:validationSchema,onSubmit:handleSubmit,children:_ref2=>{let{isSubmitting}=_ref2;return/*#__PURE__*/_jsxs(Form,{className:\"editForm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4 mb-5 mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-6\",children:/*#__PURE__*/_jsx(InputField,{name:\"name\",label:\"أسم الأشتراك\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-6\",children:/*#__PURE__*/_jsx(InputField,{label:\"السعر\",name:\"price\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4 mb-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-6\",children:/*#__PURE__*/_jsx(InputField,{label:\" المدة\",name:\"membership_duration\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-6\",children:/*#__PURE__*/_jsx(InputField,{label:\"اقصى فترة تجميد\",name:\"freeze_duration\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-lg-6 w-100\",children:/*#__PURE__*/_jsx(InputField,{label:\"ملاحظات\",name:\"description\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"editBtn text-center mt-5\",children:/*#__PURE__*/_jsx(MainButton,{text:\"حفظ التعديل\",btnType:\"submit\",disabled:isSubmitting})})]});}})]});}export default EditSub;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","Formik","Form","Yup","MainButton","ComponentTitle","InputField","jsx","_jsx","jsxs","_jsxs","EditSub","_location$state","location","navigate","membership","state","initialValues","setInitialValues","name","price","membership_duration","freeze_duration","description","validationSchema","object","string","required","handleSubmit","values","_ref","setSubmitting","response","fetch","id","method","headers","accept","Authorization","localStorage","getItem","body","JSON","stringify","ok","updateSub","json","console","error","className","children","MainIcon","title","subTitle","enableReinitialize","onSubmit","_ref2","isSubmitting","label","text","btnType","disabled"],"sources":["C:/Users/T.B/Coding/Gym-FrontEnd/src/Component/Subscriptions/EditSubscription/EditSub.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MainButton from \"../../../Common Components/Main Button/MainButton\";\r\nimport ComponentTitle from \"../../../Common Components/ComponentTitle/ComponentTitle\";\r\nimport \"./EditSub.css\";\r\nimport InputField from \"../../../Common Components/InputField/InputField\";\r\n\r\nfunction EditSub() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const membership = location.state?.membership;\r\n\r\n  const [initialValues, setInitialValues] = useState({\r\n    name: \"\",\r\n    price: \"\",\r\n    membership_duration: \"\",\r\n    freeze_duration: \"\",\r\n    description: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (membership) {\r\n      setInitialValues({\r\n        name: membership.name || \"\",\r\n        price: membership.price || \"\",\r\n        membership_duration: membership.membership_duration || \"\",\r\n        freeze_duration: membership.freeze_duration || \"\",\r\n        description: membership.description || \"\",\r\n      });\r\n    }\r\n  }, [membership]);\r\n\r\n  const validationSchema = Yup.object({\r\n    name: Yup.string().required(\"هذا الحقل الزامي\"),\r\n    price: Yup.string().required(\"هذا الحقل الزامي\"),\r\n    membership_duration: Yup.string().required(\"هذا الحقل الزامي\"),\r\n    freeze_duration: Yup.string().required(\"هذا الحقل الزامي\"),\r\n    description: Yup.string().required(\"هذا الحقل الزامي\"),\r\n  });\r\n\r\n  const handleSubmit = async (values, { setSubmitting }) => {\r\n    try {\r\n      const response = await fetch(\r\n        `https://gym-backend-production-65cc.up.railway.app/memberships/${membership.id}/`,\r\n        {\r\n          method: \"PATCH\",\r\n          headers: {\r\n            accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: localStorage.getItem(\"access\"),\r\n          },\r\n          body: JSON.stringify(values),\r\n        }\r\n      );\r\n\r\n      if (response.ok) {\r\n        const updateSub = await response.json();\r\n        navigate(\"/Home/AllSubscriptions\", { state: { updateSub } });\r\n      } else {\r\n        console.error(\"Failed to update subscription\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error updating subscription:\", error);\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"editMemberContainer\">\r\n      <div className=\"d-flex align-items-center justify-content-between ps-3 pe-3\">\r\n        <ComponentTitle\r\n          MainIcon={\"/assets/image/Vector.png\"}\r\n          title={\" تعديل أشتراك \"}\r\n          subTitle={\"يمكنك تعديل أشتراك من هنا\"}\r\n        />\r\n      </div>\r\n      <Formik\r\n        initialValues={initialValues}\r\n        enableReinitialize\r\n        validationSchema={validationSchema}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        {({ isSubmitting }) => (\r\n          <Form className=\"editForm\">\r\n            <div className=\"row g-4 mb-5 mt-5\">\r\n              <div className=\"col-4 col-lg-6\">\r\n                <InputField name=\"name\" label={\"أسم الأشتراك\"} />\r\n              </div>\r\n              <div className=\"col-4 col-lg-6\">\r\n                <InputField label={\"السعر\"} name=\"price\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"row g-4 mb-5\">\r\n              <div className=\"col-4 col-lg-6\">\r\n                <InputField label={\" المدة\"} name=\"membership_duration\" />\r\n              </div>\r\n              <div className=\"col-4 col-lg-6\">\r\n                <InputField label={\"اقصى فترة تجميد\"} name=\"freeze_duration\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"col-6 col-lg-6 w-100\">\r\n                <InputField label={\"ملاحظات\"} name=\"description\"/>\r\n              </div>\r\n            <div className=\"editBtn text-center mt-5\">\r\n              <MainButton\r\n                text={\"حفظ التعديل\"}\r\n                btnType={\"submit\"}\r\n                disabled={isSubmitting}\r\n              />\r\n            </div>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  );\r\n}\r\nexport default EditSub;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}