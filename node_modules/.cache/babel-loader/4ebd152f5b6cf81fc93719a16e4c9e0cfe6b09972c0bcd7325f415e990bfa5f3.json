{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import MainButton from\"../Main Button/MainButton\";import\"./filter.css\";import{useLazySearchQuery}from\"../../features/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const filters={name:\"الاسم\",\"user.name\":\"اسم المستخدم\",phone_number:\"رقم الجوال\",national_id:\"رقم العضوية\",\"schedule.session.name\":\"المجموعة\",\"membership.name\":\"الباقة\",\"schedule.trainer.name\":\"اسم المدرب\"};function Filter(_ref){let{options=[],query,status=true,searchResults}=_ref;const[dropdownOpen,setDropdownOpen]=useState(false);// const navigate = useNavigate();\nconst[term,setTerm]=useState(\"\");const[debounce,setDebounce]=useState(term);const[search,{isLoading}]=useLazySearchQuery();const[activeFilter,setActiveFilter]=useState(Object.keys(filters).find(value=>filters[value]===options[0]));const toggleDropdown=()=>{setDropdownOpen(!dropdownOpen);};useEffect(()=>{console.log(term);const timeout=setTimeout(()=>{setDebounce(term);},300);return()=>clearTimeout(timeout);},[term]);const searchInput=React.useRef(null);useEffect(()=>{console.log(activeFilter);if(debounce.length>0){(async()=>{const response=await search(`${query}?filter{${activeFilter}.istartswith}=${debounce}`);searchResults(response.data);console.log(response.data);})();}else{searchResults([]);}},[query,debounce,search,activeFilter,searchResults]);return/*#__PURE__*/_jsx(\"div\",{className:\"filterContainer\",children:/*#__PURE__*/_jsxs(\"form\",{className:`d-flex`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"searchInputContainer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"search\",placeholder:\"\\u0627\\u0628\\u062D\\u062B \\u0647\\u0646\\u0627\",className:\"searchInput ms-2\",ref:searchInput,value:term,onChange:e=>setTerm(e.target.value),disabled:activeFilter===\"status\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/assets/image/Component 13.png\",alt:\"search icon\",className:\"searchIcon\",onClick:toggleDropdown}),/*#__PURE__*/_jsx(\"div\",{className:`dropdownList ${dropdownOpen?\"open\":\"\"}`,children:/*#__PURE__*/_jsxs(\"ul\",{children:[options.map((option,index)=>/*#__PURE__*/_jsx(\"li\",{className:`fw-lighter ${filters[activeFilter]===option?\"bg-primary text-white rounded-2\":null}`,style:{color:\"#666666\",fontSize:\"13px\"},onClick:()=>{setActiveFilter(Object.keys(filters).find(key=>filters[key]===option));setTimeout(()=>{toggleDropdown();clearTimeout();},300);console.log(activeFilter);},children:option},index)),status&&/*#__PURE__*/_jsx(\"li\",{className:`fw-lighter`,style:{color:\"#666666\",fontSize:\"13px\",backgroundColor:\"white\",borderRadius:\"5px\",border:\"1px solid #ccc\"},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{style:{borderBottom:\"1px solid #ccc\"},className:`${term===\"فعال\"?\"bg-primary text-white rounded-2\":null}`,onClick:()=>{setActiveFilter(\"status\");setTerm(\"فعال\");setTimeout(()=>{toggleDropdown();clearTimeout();},300);},children:\"\\u0641\\u0639\\u0627\\u0644\"}),/*#__PURE__*/_jsx(\"li\",{style:{borderBottom:\"1px solid #ccc\"},className:`${term===\"منتهي\"?\"bg-primary text-white rounded-2\":null}`,onClick:()=>{setTerm(\"منتهي\");setActiveFilter(\"status\");setTimeout(()=>{toggleDropdown();clearTimeout();},300);},children:\"\\u0645\\u0646\\u062A\\u0647\\u064A\"}),/*#__PURE__*/_jsx(\"li\",{style:{borderBottom:\"1px solid #ccc\"},className:`${term===\"Almost Finished\"?\"bg-primary text-white rounded-2\":null}`,onClick:()=>{setTerm(\"تم الألغاء\");setActiveFilter(\"status\");setTimeout(()=>{toggleDropdown();clearTimeout();},300);},children:\"\\u062A\\u0645 \\u0627\\u0644\\u0623\\u0644\\u063A\\u0627\\u0621\"})]})]})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"btnDiv\",children:/*#__PURE__*/_jsx(MainButton,{text:\"بحث\",btnWidth:\"100px\",onClick:e=>{e.preventDefault();}})})]})});}export default Filter;","map":{"version":3,"names":["React","useState","useEffect","MainButton","useLazySearchQuery","jsx","_jsx","jsxs","_jsxs","filters","name","phone_number","national_id","Filter","_ref","options","query","status","searchResults","dropdownOpen","setDropdownOpen","term","setTerm","debounce","setDebounce","search","isLoading","activeFilter","setActiveFilter","Object","keys","find","value","toggleDropdown","console","log","timeout","setTimeout","clearTimeout","searchInput","useRef","length","response","data","className","children","type","id","placeholder","ref","onChange","e","target","disabled","src","alt","onClick","map","option","index","style","color","fontSize","key","backgroundColor","borderRadius","border","borderBottom","text","btnWidth","preventDefault"],"sources":["C:/Users/T.B/Coding/Gym-FrontEnd/src/Common Components/Filter/Filter.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport MainButton from \"../Main Button/MainButton\";\r\nimport \"./filter.css\";\r\nimport { useLazySearchQuery } from \"../../features/api\";\r\nconst filters = {\r\n  name: \"الاسم\",\r\n  \"user.name\": \"اسم المستخدم\",\r\n  phone_number: \"رقم الجوال\",\r\n  national_id: \"رقم العضوية\",\r\n  \"schedule.session.name\": \"المجموعة\",\r\n  \"membership.name\": \"الباقة\",\r\n  \"schedule.trainer.name\": \"اسم المدرب\",\r\n};\r\n\r\nfunction Filter({ options = [], query, status = true, searchResults }) {\r\n  const [dropdownOpen, setDropdownOpen] = useState(false);\r\n  // const navigate = useNavigate();\r\n  const [term, setTerm] = useState(\"\");\r\n  const [debounce, setDebounce] = useState(term);\r\n  const [search, { isLoading }] = useLazySearchQuery();\r\n\r\n  const [activeFilter, setActiveFilter] = useState(\r\n    Object.keys(filters).find((value) => filters[value] === options[0])\r\n  );\r\n\r\n  const toggleDropdown = () => {\r\n    setDropdownOpen(!dropdownOpen);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(term);\r\n    const timeout = setTimeout(() => {\r\n      setDebounce(term);\r\n    }, 300);\r\n    return () => clearTimeout(timeout);\r\n  }, [term]);\r\n\r\n  const searchInput = React.useRef(null);\r\n\r\n  useEffect(() => {\r\n    console.log(activeFilter);\r\n    if (debounce.length > 0) {\r\n      (async () => {\r\n        const response = await search(\r\n          `${query}?filter{${activeFilter}.istartswith}=${debounce}`\r\n        );\r\n        searchResults(response.data);\r\n        console.log(response.data);\r\n      })();\r\n    } else {\r\n      searchResults([]);\r\n    }\r\n  }, [query, debounce, search, activeFilter, searchResults]);\r\n\r\n  return (\r\n    <div className=\"filterContainer\">\r\n      <form className={`d-flex`}>\r\n        <div className=\"searchInputContainer\">\r\n          <input\r\n            type=\"text\"\r\n            id=\"search\"\r\n            placeholder=\"ابحث هنا\"\r\n            className=\"searchInput ms-2\"\r\n            ref={searchInput}\r\n            value={term}\r\n            onChange={(e) => setTerm(e.target.value)}\r\n            disabled={activeFilter === \"status\"}\r\n          />\r\n          {/* Left icon */}\r\n          <img\r\n            src=\"/assets/image/Component 13.png\"\r\n            alt=\"search icon\"\r\n            className=\"searchIcon\"\r\n            onClick={toggleDropdown}\r\n          />\r\n\r\n          {/* Dropdown list */}\r\n          <div className={`dropdownList ${dropdownOpen ? \"open\" : \"\"}`}>\r\n            <ul>\r\n              {options.map((option, index) => (\r\n                <li\r\n                  key={index}\r\n                  className={`fw-lighter ${\r\n                    filters[activeFilter] === option\r\n                      ? \"bg-primary text-white rounded-2\"\r\n                      : null\r\n                  }`}\r\n                  style={{ color: \"#666666\", fontSize: \"13px\" }}\r\n                  onClick={() => {\r\n                    setActiveFilter(\r\n                      Object.keys(filters).find(\r\n                        (key) => filters[key] === option\r\n                      )\r\n                    );\r\n                    setTimeout(() => {\r\n                      toggleDropdown();\r\n                      clearTimeout();\r\n                    }, 300);\r\n                    console.log(activeFilter);\r\n                  }}\r\n                >\r\n                  {option}\r\n                </li>\r\n              ))}\r\n              {status && (\r\n                <li\r\n                  className={`fw-lighter`}\r\n                  style={{\r\n                    color: \"#666666\",\r\n                    fontSize: \"13px\",\r\n                    backgroundColor: \"white\",\r\n                    borderRadius: \"5px\",\r\n                    border: \"1px solid #ccc\",\r\n                  }}\r\n                >\r\n                  <div>\r\n                    <span className=\"fw-bold\">الحالة</span>\r\n                    <ul>\r\n                      <li\r\n                        style={{ borderBottom: \"1px solid #ccc\" }}\r\n                        className={`${\r\n                          term === \"فعال\"\r\n                            ? \"bg-primary text-white rounded-2\"\r\n                            : null\r\n                        }`}\r\n                        onClick={() => {\r\n                          setActiveFilter(\"status\");\r\n                          setTerm(\"فعال\");\r\n                          setTimeout(() => {\r\n                            toggleDropdown();\r\n                            clearTimeout();\r\n                          }, 300);\r\n                        }}\r\n                      >\r\n                        فعال\r\n                      </li>\r\n                      <li\r\n                        style={{ borderBottom: \"1px solid #ccc\" }}\r\n                        className={`${\r\n                          term === \"منتهي\"\r\n                            ? \"bg-primary text-white rounded-2\"\r\n                            : null\r\n                        }`}\r\n                        onClick={() => {\r\n                          setTerm(\"منتهي\");\r\n                          setActiveFilter(\"status\");\r\n                          setTimeout(() => {\r\n                            toggleDropdown();\r\n                            clearTimeout();\r\n                          }, 300);\r\n                        }}\r\n                      >\r\n                        منتهي\r\n                      </li>\r\n                      <li\r\n                        style={{ borderBottom: \"1px solid #ccc\" }}\r\n                        className={`${\r\n                          term === \"Almost Finished\"\r\n                            ? \"bg-primary text-white rounded-2\"\r\n                            : null\r\n                        }`}\r\n                        onClick={() => {\r\n                          setTerm(\"تم الألغاء\");\r\n                          setActiveFilter(\"status\");\r\n                          setTimeout(() => {\r\n                            toggleDropdown();\r\n                            clearTimeout();\r\n                          }, 300);\r\n                        }}\r\n                      >\r\n                        تم الألغاء\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </li>\r\n              )}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <div className=\"btnDiv\">\r\n          <MainButton\r\n            text={\"بحث\"}\r\n            btnWidth={\"100px\"}\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n            }}\r\n          />\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\nexport default Filter;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}