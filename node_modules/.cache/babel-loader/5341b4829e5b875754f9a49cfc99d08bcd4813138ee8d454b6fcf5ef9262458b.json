{"ast":null,"code":"import React,{useState}from\"react\";import\"./forgotPassword.css\";import{Form,Formik,Field,ErrorMessage}from\"formik\";import MainButton from\"../../../../Common Components/Main Button/MainButton\";import{useNavigate}from\"react-router-dom\";import*as Yup from\"yup\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import Modal from\"../../../../Common Components/Modal/Modal\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ForgotPassword(){const navigate=useNavigate();const[showModal,setShowModal]=useState(false);const[serverError,setServerError]=useState(\"\");const access_token=localStorage.getItem(\"access\");const handleSubmit=async values=>{try{const item={phone_number:values[\"phone_number\"]};const response=await fetch(\"https://gym-backend-production-65cc.up.railway.app/auth/request-otp\",{method:\"POST\",headers:{accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:access_token},body:JSON.stringify(item)});const data=await response.json();console.log(data);if(response.ok){localStorage.setItem(\"message\",data.message);localStorage.setItem(\"phone_number\",values[\"phone_number\"]);setTimeout(()=>{navigate(\"/ConfirmCode\");},2500);setShowModal(true);setServerError(\"\");}else{toast.error(\"رقم الهاتف غير صحيح برجاءالمحاولة مرة اخري\");setServerError(\"رقم الهاتف غير صحيح برجاء المحاولة مرة أخرى\");console.log(data.error.detail);}}catch(error){console.error(\"Error occurred:\",error);setServerError(\"حدث خطأ ما، يرجى المحاولة لاحقًا\");}};const validationSchema=Yup.object({phone_number:Yup.string().matches(/^[0-9\\s]+$/,\"رقم الهاتف يجب أن يحتوي على أرقام ومسافات فقط\").required(\"رقم الهاتف مطلوب\")});const initialValues={phone_number:\"\"};return/*#__PURE__*/_jsxs(\"div\",{className:\"forgotPasswordContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"forgotPasswordFormContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/image/gym2 1.png\",alt:\"logo\",width:\"149px\",height:\"149px\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"fw-bolder text-center mt-4\",children:[\"\\u0645\\u0646 \\u0641\\u0636\\u0644\\u0643 \\u0623\\u062F\\u062E\\u0644 \\u0631\\u0642\\u0645 \\u0647\\u0627\\u062A\\u0641\\u0643 \\u0644\\u0625\\u0631\\u0633\\u0627\\u0644 \\u0631\\u0645\\u0632 \\u0627\\u0644\\u062A\\u062D\\u0642\\u0642\",/*#__PURE__*/_jsx(\"br\",{}),\" \\u0644\\u0645\\u0631\\u0629 \\u0648\\u0627\\u062D\\u062F\\u0629 (OTP).\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(Formik,{onSubmit:handleSubmit,initialValues:initialValues,validationSchema:validationSchema,children:/*#__PURE__*/_jsxs(Form,{className:\"forgotPasswordForm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"d-block fw-bolder\",htmlFor:\"phone_number\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062C\\u0648\\u0627\\u0644\"}),/*#__PURE__*/_jsx(Field,{className:\"forgotPasswordForm__input mt-3 p-3\",name:\"phone_number\",id:\"phone_number\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"phone_number\",component:\"div\",className:\"text-danger error-message\"}),serverError&&/*#__PURE__*/// error is founded\n_jsx(\"div\",{className:\"text-danger mt-2\",children:serverError})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sendCodeBtn mt-4\",children:/*#__PURE__*/_jsx(MainButton,{btnType:\"submit\",text:\"ارسال رمز\"})})]})})})]}),/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(Modal,{isOpen:showModal,children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column align-items-center justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/image/pepicons-pencil_checkmark-outlined.png\",alt:\"\",width:\"100px\",height:\"100px\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center justify-content-center fw-bolder fs-6 p-3\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-dark\",style:{color:\"\",fontSize:\"\"},children:[\"\\u0644\\u0642\\u062F \\u062A\\u0645 \\u0625\\u0631\\u0633\\u0627\\u0644 \\u0637\\u0644\\u0628 \\u0627\\u0644\\u062A\\u062D\\u0642\\u0642 \\u0625\\u0644\\u0649 \\u0631\\u0642\\u0645\\u0643:\",/*#__PURE__*/_jsx(\"span\",{className:\"fw-bolder ms-2 me-2\",children:localStorage.getItem(\"phone_number\")})]})})]})]});}export default ForgotPassword;","map":{"version":3,"names":["React","useState","Form","Formik","Field","ErrorMessage","MainButton","useNavigate","Yup","ToastContainer","toast","Modal","jsx","_jsx","jsxs","_jsxs","ForgotPassword","navigate","showModal","setShowModal","serverError","setServerError","access_token","localStorage","getItem","handleSubmit","values","item","phone_number","response","fetch","method","headers","accept","Authorization","body","JSON","stringify","data","json","console","log","ok","setItem","message","setTimeout","error","detail","validationSchema","object","string","matches","required","initialValues","className","children","src","alt","width","height","onSubmit","htmlFor","name","id","component","btnType","text","isOpen","style","color","fontSize"],"sources":["C:/Users/T.B/Coding/Gym-FrontEnd/src/Pages/Auth/Password/Forgot Password/ForgotPassword.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./forgotPassword.css\";\r\nimport { Form, Formik, Field, ErrorMessage } from \"formik\";\r\nimport MainButton from \"../../../../Common Components/Main Button/MainButton\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport * as Yup from \"yup\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Modal from \"../../../../Common Components/Modal/Modal\";\r\n\r\nfunction ForgotPassword() {\r\n  const navigate = useNavigate();\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [serverError, setServerError] = useState(\"\");\r\n  const access_token = localStorage.getItem(\"access\");\r\n\r\n  const handleSubmit = async (values) => {\r\n    try {\r\n      const item = {\r\n        phone_number: values[\"phone_number\"],\r\n      };\r\n      const response = await fetch(\r\n        \"https://gym-backend-production-65cc.up.railway.app/auth/request-otp\",\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: access_token,\r\n          },\r\n          body: JSON.stringify(item),\r\n        }\r\n      );\r\n      const data = await response.json();\r\n      console.log(data);\r\n\r\n      if (response.ok) {\r\n        localStorage.setItem(\"message\", data.message);\r\n        localStorage.setItem(\"phone_number\", values[\"phone_number\"]);\r\n        setTimeout(() => {\r\n          navigate(\"/ConfirmCode\");\r\n        }, 2500);\r\n        setShowModal(true);\r\n        setServerError(\"\");\r\n      } else {\r\n        toast.error(\"رقم الهاتف غير صحيح برجاءالمحاولة مرة اخري\");\r\n        setServerError(\"رقم الهاتف غير صحيح برجاء المحاولة مرة أخرى\");\r\n        console.log(data.error.detail);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error occurred:\", error);\r\n      setServerError(\"حدث خطأ ما، يرجى المحاولة لاحقًا\");\r\n    }\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    phone_number: Yup.string()\r\n      .matches(/^[0-9\\s]+$/, \"رقم الهاتف يجب أن يحتوي على أرقام ومسافات فقط\")\r\n      .required(\"رقم الهاتف مطلوب\"),\r\n  });\r\n\r\n  const initialValues = {\r\n    phone_number: \"\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"forgotPasswordContainer\">\r\n      <div className=\"forgotPasswordFormContainer\">\r\n        <div className=\"mt-3 d-flex justify-content-center\">\r\n          <img\r\n            src=\"/assets/image/gym2 1.png\"\r\n            alt=\"logo\"\r\n            width={\"149px\"}\r\n            height={\"149px\"}\r\n          />\r\n        </div>\r\n        <p className=\"fw-bolder text-center mt-4\">\r\n          من فضلك أدخل رقم هاتفك لإرسال رمز التحقق\r\n          <br /> لمرة واحدة (OTP).\r\n        </p>\r\n\r\n        <div className=\"mt-4\">\r\n          <Formik\r\n            onSubmit={handleSubmit}\r\n            initialValues={initialValues}\r\n            validationSchema={validationSchema}\r\n          >\r\n            <Form className=\"forgotPasswordForm\">\r\n              <div>\r\n                <label className=\"d-block fw-bolder\" htmlFor=\"phone_number\">\r\n                  رقم الجوال\r\n                </label>\r\n                <Field\r\n                  className=\"forgotPasswordForm__input mt-3 p-3\"\r\n                  name=\"phone_number\"\r\n                  id=\"phone_number\"\r\n                />\r\n                <ErrorMessage\r\n                  name=\"phone_number\"\r\n                  component=\"div\"\r\n                  className=\"text-danger error-message\"\r\n                />\r\n                {serverError && ( // error is founded\r\n                  <div className=\"text-danger mt-2\">{serverError}</div>\r\n                )}\r\n              </div>\r\n              <div className=\"sendCodeBtn mt-4\">\r\n                <MainButton btnType={\"submit\"} text={\"ارسال رمز\"} />\r\n              </div>\r\n            </Form>\r\n          </Formik>\r\n        </div>\r\n      </div>\r\n      <ToastContainer />\r\n      <Modal isOpen={showModal}>\r\n        <div className=\"d-flex flex-column align-items-center justify-content-center\">\r\n          <div className=\"mt-4\">\r\n            <img\r\n              src=\"/assets/image/pepicons-pencil_checkmark-outlined.png\"\r\n              alt=\"\"\r\n              width={\"100px\"}\r\n              height={\"100px\"}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"d-flex align-items-center justify-content-center fw-bolder fs-6 p-3\">\r\n          <p\r\n            className=\"text-center text-dark\"\r\n            style={{ color: \"\", fontSize: \"\" }}\r\n          >\r\n            لقد تم إرسال طلب التحقق إلى رقمك:\r\n            <span className=\"fw-bolder ms-2 me-2\">\r\n              {localStorage.getItem(\"phone_number\")}\r\n            </span>\r\n          </p>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\nexport default ForgotPassword;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}