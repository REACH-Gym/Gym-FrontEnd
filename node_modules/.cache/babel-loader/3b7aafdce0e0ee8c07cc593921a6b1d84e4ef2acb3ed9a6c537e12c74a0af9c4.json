{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useGetGroupsMembersQuery}from\"../../features/api\";import GroupsItem from\"../GroupsContainerItem/GroupsItem\";import styles from\"./GroupsContainer.module.css\";import MainButton from\"../../Common Components/Main Button/MainButton\";import ComponentTitle from\"../../Common Components/ComponentTitle/ComponentTitle\";import Filter from\"../../Common Components/Filter/Filter\";import ComponentBtns from\"../../Common Components/ComponentBtns/ComponentBtns\";import{useNavigate}from\"react-router-dom\";import{Commet}from\"react-loading-indicators\";// Groups table container and header\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const GroupsContainer=()=>{var _groupsMembers$data,_groupsMembers$data$u;const navigate=useNavigate();const[results,setResults]=useState([]);const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(0);const{data:groupsMembers,isFetching:isGroupsMembersFetching,error:groupsMembersError}=useGetGroupsMembersQuery(`?exclude[]=admin.*&exclude[]=schedule.*&exclude[]=schedule.session.*&exclude[]=schedule.trainer.*&exclude[]=user.*&include[]=schedule.session.name&include[]=schedule.trainer.name&include[]=user.name&page=${page}&per_page=20&sort[]=-id`);console.log(groupsMembers);useEffect(()=>{var _groupsMembers$data$m,_groupsMembers$data$m2;setTotalPages(groupsMembers===null||groupsMembers===void 0?void 0:(_groupsMembers$data$m=groupsMembers.data.meta)===null||_groupsMembers$data$m===void 0?void 0:_groupsMembers$data$m.total_pages);console.log(groupsMembers===null||groupsMembers===void 0?void 0:(_groupsMembers$data$m2=groupsMembers.data.meta)===null||_groupsMembers$data$m2===void 0?void 0:_groupsMembers$data$m2.total_pages);},[groupsMembers]);useEffect(()=>{var _results$data,_results$data$user_se;console.log(results===null||results===void 0?void 0:(_results$data=results.data)===null||_results$data===void 0?void 0:(_results$data$user_se=_results$data.user_sessions)===null||_results$data$user_se===void 0?void 0:_results$data$user_se.length);},[results]);if(isGroupsMembersFetching){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center w-100\",children:/*#__PURE__*/_jsx(Commet,{color:\"#316dcc\",size:\"medium\",text:\"\",textColor:\"\"})});}if(groupsMembersError){return/*#__PURE__*/_jsx(\"div\",{className:`fs-3 fw-bold text-danger d-flex justify-content-center align-items-center`,children:\"\\u062D\\u062F\\u062B \\u062E\\u0637\\u0623\\u060C \\u0628\\u0631\\u062C\\u0627\\u0621 \\u0627\\u0644\\u0645\\u062D\\u0627\\u0648\\u0644\\u0629 \\u0645\\u0631\\u0629 \\u0623\\u062E\\u0631\\u0649.\"});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:`${styles.groupsContainer}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-between gap-3 ps-3 pe-3\",children:[/*#__PURE__*/_jsx(ComponentTitle,{MainIcon:\"/assets/image/groups.png\",title:\"جميع المجموعات\",subTitle:\"يمكنك متابعة جميع المجموعات المحفوظة\"}),/*#__PURE__*/_jsx(ComponentBtns,{btn1:\"+ إضافة عضو لمجموعة\",onclick:()=>{console.log(\"clicked\");navigate(\"/Home/AddGroupMember\");}})]}),/*#__PURE__*/_jsxs(\"div\",{className:`${styles.tableContainer} text-end ps-4 pe-4`,children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-100\",children:[/*#__PURE__*/_jsxs(\"thead\",{className:`fw-bold`,children:[/*#__PURE__*/_jsx(\"th\",{className:`p-2 pt-3 pb-3`,children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{className:`p-2 pt-3 pb-3`,children:\"\\u0627\\u0644\\u0625\\u0633\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:`p-2 pt-3 pb-3`,children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:`p-2 pt-3 pb-3`,children:\"\\u0627\\u0644\\u0645\\u062F\\u0631\\u0628\"}),/*#__PURE__*/_jsx(\"th\",{className:`p-2 pt-3 pb-3`,children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:`p-2 pt-3 pb-3 text-center`,children:\"\\u062E\\u064A\\u0627\\u0631\\u0627\\u062A\"})]}),/*#__PURE__*/_jsx(\"tbody\",{children:groupsMembers===null||groupsMembers===void 0?void 0:(_groupsMembers$data=groupsMembers.data)===null||_groupsMembers$data===void 0?void 0:(_groupsMembers$data$u=_groupsMembers$data.user_sessions)===null||_groupsMembers$data$u===void 0?void 0:_groupsMembers$data$u.map((item,index)=>/*#__PURE__*/_jsx(GroupsItem,{index:(groupsMembers===null||groupsMembers===void 0?void 0:groupsMembers.data.user_sessions.indexOf(item))+(page-1)*5+1,item:item},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:`d-flex justify-content-between align-items-center ${styles.pageBtn}`,children:[/*#__PURE__*/_jsx(MainButton,{onClick:()=>setPage(page-1),disabled:page===1,text:\"<<\",btnWidth:\"100px\"}),/*#__PURE__*/_jsxs(\"p\",{className:`m-0`,children:[\"\\u0635\\u0641\\u062D\\u0629 \",page,\" \\u0645\\u0646 \",totalPages]}),/*#__PURE__*/_jsx(MainButton,{onClick:()=>setPage(page+1),disabled:page===totalPages,text:\">>\",btnWidth:\"100px\"})]})]})]})});};export default GroupsContainer;","map":{"version":3,"names":["useEffect","useState","useGetGroupsMembersQuery","GroupsItem","styles","MainButton","ComponentTitle","Filter","ComponentBtns","useNavigate","Commet","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","GroupsContainer","_groupsMembers$data","_groupsMembers$data$u","navigate","results","setResults","page","setPage","totalPages","setTotalPages","data","groupsMembers","isFetching","isGroupsMembersFetching","error","groupsMembersError","console","log","_groupsMembers$data$m","_groupsMembers$data$m2","meta","total_pages","_results$data","_results$data$user_se","user_sessions","length","className","children","color","size","text","textColor","groupsContainer","MainIcon","title","subTitle","btn1","onclick","tableContainer","map","item","index","indexOf","pageBtn","onClick","disabled","btnWidth"],"sources":["C:/Users/T.B/Coding/Gym-FrontEnd/src/Component/GroupsContainer/GroupsContainer.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useGetGroupsMembersQuery } from \"../../features/api\";\r\nimport GroupsItem from \"../GroupsContainerItem/GroupsItem\";\r\nimport styles from \"./GroupsContainer.module.css\";\r\nimport MainButton from \"../../Common Components/Main Button/MainButton\";\r\nimport ComponentTitle from \"../../Common Components/ComponentTitle/ComponentTitle\";\r\nimport Filter from \"../../Common Components/Filter/Filter\";\r\nimport ComponentBtns from \"../../Common Components/ComponentBtns/ComponentBtns\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Commet } from \"react-loading-indicators\";\r\n\r\n// Groups table container and header\r\nconst GroupsContainer = () => {\r\n  const navigate = useNavigate();\r\n  const [results, setResults] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const {\r\n    data: groupsMembers,\r\n    isFetching: isGroupsMembersFetching,\r\n    error: groupsMembersError,\r\n  } = useGetGroupsMembersQuery(\r\n    `?exclude[]=admin.*&exclude[]=schedule.*&exclude[]=schedule.session.*&exclude[]=schedule.trainer.*&exclude[]=user.*&include[]=schedule.session.name&include[]=schedule.trainer.name&include[]=user.name&page=${page}&per_page=20&sort[]=-id`\r\n  );\r\n  console.log(groupsMembers);\r\n  useEffect(() => {\r\n    setTotalPages(groupsMembers?.data.meta?.total_pages);\r\n    console.log(groupsMembers?.data.meta?.total_pages);\r\n  }, [groupsMembers]);\r\n\r\n  useEffect(() => {\r\n    console.log(results?.data?.user_sessions?.length);\r\n  }, [results]);\r\n\r\n  if (isGroupsMembersFetching) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center align-items-center w-100\">\r\n        <Commet color=\"#316dcc\" size=\"medium\" text=\"\" textColor=\"\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (groupsMembersError) {\r\n    return (\r\n      <div\r\n        className={`fs-3 fw-bold text-danger d-flex justify-content-center align-items-center`}\r\n      >\r\n        حدث خطأ، برجاء المحاولة مرة أخرى.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={`${styles.groupsContainer}`}>\r\n        <div className=\"d-flex align-items-center justify-content-between gap-3 ps-3 pe-3\">\r\n          <ComponentTitle\r\n            MainIcon={\"/assets/image/groups.png\"}\r\n            title={\"جميع المجموعات\"}\r\n            subTitle={\"يمكنك متابعة جميع المجموعات المحفوظة\"}\r\n          />\r\n          {/* <Filter\r\n            query={\"members/sessions/\"}\r\n            options={[\"اسم المستخدم\", \"المجموعة\", \"اسم المدرب\"]}\r\n            searchResults={setResults}\r\n          /> */}\r\n          <ComponentBtns\r\n            btn1={\"+ إضافة عضو لمجموعة\"}\r\n            onclick={() => {\r\n              console.log(\"clicked\");\r\n              navigate(\"/Home/AddGroupMember\");\r\n            }}\r\n          />\r\n        </div>\r\n        {/* {results?.data?.user_sessions?.length > 0 ? ( */}\r\n        {/* <div className={` ${styles.tableContainer} text-end ps-4 pe-4`}>\r\n          <table className=\"w-100\">\r\n            <thead>\r\n              <tr>\r\n                <th className={`p-2 pt-3 pb-3`}>#</th>\r\n                <th className={`p-2 pt-3 pb-3`}>الإسم</th>\r\n                <th className={`p-2 pt-3 pb-3`}>اسم المجموعة</th>\r\n                <th className={`p-2 pt-3 pb-3`}>المدرب</th>\r\n                <th className={`p-2 pt-3 pb-3`}>الحالة</th>\r\n                <th className={`p-2 pt-3 pb-3 text-center`}>خيارات</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {results?.data?.user_sessions?.map((item, index) => (\r\n                <GroupsItem key={index} index={index + 1} item={item} />\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div> */}\r\n        {/* ) : ( */}\r\n        <div className={`${styles.tableContainer} text-end ps-4 pe-4`}>\r\n          <table className=\"w-100\">\r\n            <thead className={`fw-bold`}>\r\n              <th className={`p-2 pt-3 pb-3`}>#</th>\r\n              <th className={`p-2 pt-3 pb-3`}>الإسم</th>\r\n              <th className={`p-2 pt-3 pb-3`}>اسم المجموعة</th>\r\n              <th className={`p-2 pt-3 pb-3`}>المدرب</th>\r\n              <th className={`p-2 pt-3 pb-3`}>الحالة</th>\r\n              <th className={`p-2 pt-3 pb-3 text-center`}>خيارات</th>\r\n            </thead>\r\n            <tbody>\r\n              {groupsMembers?.data?.user_sessions?.map((item, index) => (\r\n                <GroupsItem\r\n                  key={index}\r\n                  index={\r\n                    groupsMembers?.data.user_sessions.indexOf(item) +\r\n                    (page - 1) * 5 +\r\n                    1\r\n                  }\r\n                  item={item}\r\n                />\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          <div\r\n            className={`d-flex justify-content-between align-items-center ${styles.pageBtn}`}\r\n          >\r\n            <MainButton\r\n              onClick={() => setPage(page - 1)}\r\n              disabled={page === 1}\r\n              text={\"<<\"}\r\n              btnWidth=\"100px\"\r\n            />\r\n            <p className={`m-0`}>\r\n              صفحة {page} من {totalPages}\r\n            </p>\r\n            <MainButton\r\n              onClick={() => setPage(page + 1)}\r\n              disabled={page === totalPages}\r\n              text={\">>\"}\r\n              btnWidth=\"100px\"\r\n            />\r\n          </div>\r\n        </div>\r\n        {/* )} */}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GroupsContainer;\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,wBAAwB,KAAQ,oBAAoB,CAC7D,MAAO,CAAAC,UAAU,KAAM,mCAAmC,CAC1D,MAAO,CAAAC,MAAM,KAAM,8BAA8B,CACjD,MAAO,CAAAC,UAAU,KAAM,gDAAgD,CACvE,MAAO,CAAAC,cAAc,KAAM,uDAAuD,CAClF,MAAO,CAAAC,MAAM,KAAM,uCAAuC,CAC1D,MAAO,CAAAC,aAAa,KAAM,qDAAqD,CAC/E,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,MAAM,KAAQ,0BAA0B,CAEjD;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBACA,KAAM,CAAAC,eAAe,CAAGA,CAAA,GAAM,KAAAC,mBAAA,CAAAC,qBAAA,CAC5B,KAAM,CAAAC,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACsB,IAAI,CAAEC,OAAO,CAAC,CAAGvB,QAAQ,CAAC,CAAC,CAAC,CACnC,KAAM,CAACwB,UAAU,CAAEC,aAAa,CAAC,CAAGzB,QAAQ,CAAC,CAAC,CAAC,CAC/C,KAAM,CACJ0B,IAAI,CAAEC,aAAa,CACnBC,UAAU,CAAEC,uBAAuB,CACnCC,KAAK,CAAEC,kBACT,CAAC,CAAG9B,wBAAwB,CAC1B,+MAA+MqB,IAAI,yBACrN,CAAC,CACDU,OAAO,CAACC,GAAG,CAACN,aAAa,CAAC,CAC1B5B,SAAS,CAAC,IAAM,KAAAmC,qBAAA,CAAAC,sBAAA,CACdV,aAAa,CAACE,aAAa,SAAbA,aAAa,kBAAAO,qBAAA,CAAbP,aAAa,CAAED,IAAI,CAACU,IAAI,UAAAF,qBAAA,iBAAxBA,qBAAA,CAA0BG,WAAW,CAAC,CACpDL,OAAO,CAACC,GAAG,CAACN,aAAa,SAAbA,aAAa,kBAAAQ,sBAAA,CAAbR,aAAa,CAAED,IAAI,CAACU,IAAI,UAAAD,sBAAA,iBAAxBA,sBAAA,CAA0BE,WAAW,CAAC,CACpD,CAAC,CAAE,CAACV,aAAa,CAAC,CAAC,CAEnB5B,SAAS,CAAC,IAAM,KAAAuC,aAAA,CAAAC,qBAAA,CACdP,OAAO,CAACC,GAAG,CAACb,OAAO,SAAPA,OAAO,kBAAAkB,aAAA,CAAPlB,OAAO,CAAEM,IAAI,UAAAY,aAAA,kBAAAC,qBAAA,CAAbD,aAAA,CAAeE,aAAa,UAAAD,qBAAA,iBAA5BA,qBAAA,CAA8BE,MAAM,CAAC,CACnD,CAAC,CAAE,CAACrB,OAAO,CAAC,CAAC,CAEb,GAAIS,uBAAuB,CAAE,CAC3B,mBACElB,IAAA,QAAK+B,SAAS,CAAC,wDAAwD,CAAAC,QAAA,cACrEhC,IAAA,CAACF,MAAM,EAACmC,KAAK,CAAC,SAAS,CAACC,IAAI,CAAC,QAAQ,CAACC,IAAI,CAAC,EAAE,CAACC,SAAS,CAAC,EAAE,CAAE,CAAC,CAC1D,CAAC,CAEV,CAEA,GAAIhB,kBAAkB,CAAE,CACtB,mBACEpB,IAAA,QACE+B,SAAS,CAAE,2EAA4E,CAAAC,QAAA,CACxF,0KAED,CAAK,CAAC,CAEV,CAEA,mBACEhC,IAAA,CAAAI,SAAA,EAAA4B,QAAA,cACE9B,KAAA,QAAK6B,SAAS,CAAE,GAAGvC,MAAM,CAAC6C,eAAe,EAAG,CAAAL,QAAA,eAC1C9B,KAAA,QAAK6B,SAAS,CAAC,mEAAmE,CAAAC,QAAA,eAChFhC,IAAA,CAACN,cAAc,EACb4C,QAAQ,CAAE,0BAA2B,CACrCC,KAAK,CAAE,gBAAiB,CACxBC,QAAQ,CAAE,sCAAuC,CAClD,CAAC,cAMFxC,IAAA,CAACJ,aAAa,EACZ6C,IAAI,CAAE,qBAAsB,CAC5BC,OAAO,CAAEA,CAAA,GAAM,CACbrB,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC,CACtBd,QAAQ,CAAC,sBAAsB,CAAC,CAClC,CAAE,CACH,CAAC,EACC,CAAC,cAsBNN,KAAA,QAAK6B,SAAS,CAAE,GAAGvC,MAAM,CAACmD,cAAc,qBAAsB,CAAAX,QAAA,eAC5D9B,KAAA,UAAO6B,SAAS,CAAC,OAAO,CAAAC,QAAA,eACtB9B,KAAA,UAAO6B,SAAS,CAAE,SAAU,CAAAC,QAAA,eAC1BhC,IAAA,OAAI+B,SAAS,CAAE,eAAgB,CAAAC,QAAA,CAAC,GAAC,CAAI,CAAC,cACtChC,IAAA,OAAI+B,SAAS,CAAE,eAAgB,CAAAC,QAAA,CAAC,gCAAK,CAAI,CAAC,cAC1ChC,IAAA,OAAI+B,SAAS,CAAE,eAAgB,CAAAC,QAAA,CAAC,qEAAY,CAAI,CAAC,cACjDhC,IAAA,OAAI+B,SAAS,CAAE,eAAgB,CAAAC,QAAA,CAAC,sCAAM,CAAI,CAAC,cAC3ChC,IAAA,OAAI+B,SAAS,CAAE,eAAgB,CAAAC,QAAA,CAAC,sCAAM,CAAI,CAAC,cAC3ChC,IAAA,OAAI+B,SAAS,CAAE,2BAA4B,CAAAC,QAAA,CAAC,sCAAM,CAAI,CAAC,EAClD,CAAC,cACRhC,IAAA,UAAAgC,QAAA,CACGhB,aAAa,SAAbA,aAAa,kBAAAV,mBAAA,CAAbU,aAAa,CAAED,IAAI,UAAAT,mBAAA,kBAAAC,qBAAA,CAAnBD,mBAAA,CAAqBuB,aAAa,UAAAtB,qBAAA,iBAAlCA,qBAAA,CAAoCqC,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBACnD9C,IAAA,CAACT,UAAU,EAETuD,KAAK,CACH,CAAA9B,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAED,IAAI,CAACc,aAAa,CAACkB,OAAO,CAACF,IAAI,CAAC,EAC/C,CAAClC,IAAI,CAAG,CAAC,EAAI,CAAC,CACd,CACD,CACDkC,IAAI,CAAEA,IAAK,EANNC,KAON,CACF,CAAC,CACG,CAAC,EACH,CAAC,cACR5C,KAAA,QACE6B,SAAS,CAAE,qDAAqDvC,MAAM,CAACwD,OAAO,EAAG,CAAAhB,QAAA,eAEjFhC,IAAA,CAACP,UAAU,EACTwD,OAAO,CAAEA,CAAA,GAAMrC,OAAO,CAACD,IAAI,CAAG,CAAC,CAAE,CACjCuC,QAAQ,CAAEvC,IAAI,GAAK,CAAE,CACrBwB,IAAI,CAAE,IAAK,CACXgB,QAAQ,CAAC,OAAO,CACjB,CAAC,cACFjD,KAAA,MAAG6B,SAAS,CAAE,KAAM,CAAAC,QAAA,EAAC,2BACd,CAACrB,IAAI,CAAC,gBAAI,CAACE,UAAU,EACzB,CAAC,cACJb,IAAA,CAACP,UAAU,EACTwD,OAAO,CAAEA,CAAA,GAAMrC,OAAO,CAACD,IAAI,CAAG,CAAC,CAAE,CACjCuC,QAAQ,CAAEvC,IAAI,GAAKE,UAAW,CAC9BsB,IAAI,CAAE,IAAK,CACXgB,QAAQ,CAAC,OAAO,CACjB,CAAC,EACC,CAAC,EACH,CAAC,EAEH,CAAC,CACN,CAAC,CAEP,CAAC,CAED,cAAe,CAAA9C,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}