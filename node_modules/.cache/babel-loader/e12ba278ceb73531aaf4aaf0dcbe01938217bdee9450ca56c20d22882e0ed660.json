{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useLocation,useNavigate,Link}from\"react-router-dom\";import{Formik,Form}from\"formik\";import*as Yup from\"yup\";import MainButton from\"../../../Common Components/Main Button/MainButton\";import ComponentTitle from\"../../../Common Components/ComponentTitle/ComponentTitle\";import\"./EditMember.css\";import InputField from\"../../../Common Components/InputField/InputField\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EditMember(){var _location$state;const location=useLocation();const navigate=useNavigate();const member=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.member;const[initialValues,setInitialValues]=useState({name:\"\",phone_number:\"\",national_id:\"\",date_of_birth:\"\",gender:\"\"});useEffect(()=>{if(member){setInitialValues({name:member.name,phone_number:member.phone_number,national_id:member.national_id,date_of_birth:member.date_of_birth,gender:member.gender==='أنثي'?'انثي':'ذكر'});}},[member]);const validationSchema=Yup.object({name:Yup.string().required(\"مطلوب\"),phone_number:Yup.string().required(\"مطلوب\"),national_id:Yup.string().required(\"مطلوب\"),date_of_birth:Yup.date().required(\"مطلوب\"),gender:Yup.string().required(\"مطلوب\")});const handleSubmit=async(values,_ref)=>{let{setSubmitting}=_ref;try{const response=await fetch(`https://gym-backend-production-65cc.up.railway.app/members/${member.id}`,{method:\"PATCH\",headers:{Authorization:localStorage.getItem(\"access\"),\"Content-Type\":\"application/json\"},body:JSON.stringify(values)// The values will now include gender\n});if(response.ok){const updatedMember=await response.json();navigate(\"/Home/AllMembers\",{state:{updatedMember}});}else{console.error(\"Failed to update member\");}}catch(error){console.error(\"Error updating member:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"editMemberContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center justify-content-between ps-3 pe-3\",children:/*#__PURE__*/_jsx(ComponentTitle,{MainIcon:\"/assets/image/Vector.png\",title:\" تعديل عضو \",subTitle:\"يمكنك تعديل عضو  من هنا\"})}),/*#__PURE__*/_jsx(Formik,{initialValues:initialValues,enableReinitialize:true,validationSchema:validationSchema,onSubmit:handleSubmit,children:_ref2=>{let{isSubmitting}=_ref2;return/*#__PURE__*/_jsxs(Form,{className:\"editForm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5 d-flex flex-column align-items-center mb-4 position-relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"position-relative\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/image/user image.png\",alt:\"user img\",width:\"84.55px\",height:\"84.55px\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute upload-image\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/image/Frame 119.png\",alt:\"upload img\",className:\"mb-1\",width:\"25px\",height:\"25px\"})}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-decoration-none mt-3\",children:/*#__PURE__*/_jsx(\"p\",{style:{color:\"#3572EF\"},children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u0635\\u0648\\u0631\\u0629\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4 mb-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-6\",children:/*#__PURE__*/_jsx(InputField,{name:\"name\",label:\"الأسم\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-6\",children:/*#__PURE__*/_jsx(InputField,{label:\"رقم الهاتف\",name:\"phone_number\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4 mb-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-6\",children:/*#__PURE__*/_jsx(InputField,{label:\"رقم العضوية\",name:\"national_id\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-6\",children:/*#__PURE__*/_jsx(InputField,{label:\"تاريخ الميلاد\",type:\"date\",name:\"date_of_birth\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"editBtn text-center\",children:/*#__PURE__*/_jsx(MainButton,{text:\"حفظ التعديل\",btnType:\"submit\",disabled:isSubmitting})})]});}})]});}export default EditMember;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","Link","Formik","Form","Yup","MainButton","ComponentTitle","InputField","jsx","_jsx","jsxs","_jsxs","EditMember","_location$state","location","navigate","member","state","initialValues","setInitialValues","name","phone_number","national_id","date_of_birth","gender","validationSchema","object","string","required","date","handleSubmit","values","_ref","setSubmitting","response","fetch","id","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","ok","updatedMember","json","console","error","className","children","MainIcon","title","subTitle","enableReinitialize","onSubmit","_ref2","isSubmitting","src","alt","width","height","to","style","color","label","type","text","btnType","disabled"],"sources":["C:/Users/T.B/Coding/Gym-FrontEnd/src/Component/Members/Edit Member/EditMember.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useLocation, useNavigate, Link } from \"react-router-dom\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MainButton from \"../../../Common Components/Main Button/MainButton\";\r\nimport ComponentTitle from \"../../../Common Components/ComponentTitle/ComponentTitle\";\r\nimport \"./EditMember.css\";\r\nimport InputField from \"../../../Common Components/InputField/InputField\";\r\n\r\nfunction EditMember() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const member = location.state?.member;\r\n\r\n  const [initialValues, setInitialValues] = useState({\r\n    name: \"\",\r\n    phone_number: \"\",\r\n    national_id: \"\",\r\n    date_of_birth: \"\",\r\n    gender: \"\", \r\n  });\r\n\r\n  useEffect(() => {\r\n    if (member) {\r\n      setInitialValues({\r\n        name: member.name,\r\n        phone_number: member.phone_number,\r\n        national_id: member.national_id,\r\n        date_of_birth: member.date_of_birth,\r\n        gender: member.gender === 'أنثي' ? 'انثي' : 'ذكر',\r\n      });\r\n    }\r\n  }, [member]);\r\n\r\n  const validationSchema = Yup.object({\r\n    name: Yup.string().required(\"مطلوب\"),\r\n    phone_number: Yup.string().required(\"مطلوب\"),\r\n    national_id: Yup.string().required(\"مطلوب\"),\r\n    date_of_birth: Yup.date().required(\"مطلوب\"),\r\n    gender: Yup.string().required(\"مطلوب\"),\r\n  });\r\n\r\n  const handleSubmit = async (values, { setSubmitting }) => {\r\n    try {\r\n      const response = await fetch(\r\n        `https://gym-backend-production-65cc.up.railway.app/members/${member.id}`,\r\n        {\r\n          method: \"PATCH\",\r\n          headers: {\r\n            Authorization: localStorage.getItem(\"access\"),\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(values), // The values will now include gender\r\n        }\r\n      );\r\n\r\n      if (response.ok) {\r\n        const updatedMember = await response.json();\r\n        navigate(\"/Home/AllMembers\", { state: { updatedMember } });\r\n      } else {\r\n        console.error(\"Failed to update member\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error updating member:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"editMemberContainer\">\r\n      <div className=\"d-flex align-items-center justify-content-between ps-3 pe-3\">\r\n        <ComponentTitle\r\n          MainIcon={\"/assets/image/Vector.png\"}\r\n          title={\" تعديل عضو \"}\r\n          subTitle={\"يمكنك تعديل عضو  من هنا\"}\r\n        />\r\n      </div>\r\n      <Formik\r\n        initialValues={initialValues}\r\n        enableReinitialize\r\n        validationSchema={validationSchema}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        {({ isSubmitting }) => (\r\n          <Form className=\"editForm\">\r\n            <div className=\"mt-5 d-flex flex-column align-items-center mb-4 position-relative\">\r\n              <div className=\"position-relative\">\r\n                <img\r\n                  src=\"/assets/image/user image.png\"\r\n                  alt=\"user img\"\r\n                  width={\"84.55px\"}\r\n                  height={\"84.55px\"}\r\n                />\r\n              </div>\r\n              <div className=\"position-absolute upload-image\">\r\n                <img\r\n                  src=\"/assets/image/Frame 119.png\"\r\n                  alt=\"upload img\"\r\n                  className=\"mb-1\"\r\n                  width={\"25px\"}\r\n                  height={\"25px\"}\r\n                />\r\n              </div>\r\n              <Link to={\"/\"} className=\"text-decoration-none mt-3\">\r\n                <p style={{ color: \"#3572EF\" }}>تعديل الصورة</p>\r\n              </Link>\r\n            </div>\r\n            <div className=\"row g-4 mb-5\">\r\n              <div className=\"col-4 col-lg-6\">\r\n                <InputField name=\"name\" label={\"الأسم\"} />\r\n              </div>\r\n              <div className=\"col-4 col-lg-6\">\r\n                <InputField label={\"رقم الهاتف\"} name=\"phone_number\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"row g-4 mb-5\">\r\n              <div className=\"col-4 col-lg-6\">\r\n                <InputField label={\"رقم العضوية\"} name=\"national_id\" />\r\n              </div>\r\n              <div className=\"col-4 col-lg-6\">\r\n                <InputField\r\n                  label={\"تاريخ الميلاد\"}\r\n                  type=\"date\"\r\n                  name=\"date_of_birth\"\r\n                />\r\n              </div>\r\n              {/* <div className=\"col-4 col-lg-6\">\r\n                <InputField\r\n                  name={\"gender\"}\r\n                  label={\"النوع\"}\r\n                  inputType={\"select\"}\r\n                >\r\n                  <option value=\"\">{\"أختر نوع\"}</option>\r\n                  <option value=\"انثي\">{\"انثي\"}</option>\r\n                  <option value=\"ذكر\">{\"ذكر\"}</option>\r\n                </InputField>\r\n              </div> */}\r\n            </div>\r\n            <div className=\"editBtn text-center\">\r\n              <MainButton\r\n                text={\"حفظ التعديل\"}\r\n                btnType={\"submit\"}\r\n                disabled={isSubmitting}\r\n              />\r\n            </div>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditMember;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}